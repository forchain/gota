package ta_test

import (
	. "github.com/vertis/gota/ta"

	. "github.com/onsi/ginkgo"
	. "github.com/onsi/gomega"
)

var _ = Describe("StochRSI", func() {
	It("should return the correct values", func() {
		in := []float64 { 417.26, 419.34, 417.96, 417.4, 418.1, 417.61, 415.1, 414.34, 420.44, 420.77, 418.21, 418.86, 416.36, 412.64, 418.13, 414.96, 415.48, 414.99, 414.96, 410.34, 411.62, 408.78, 409.53, 413.85, 413.84, 413.82, 411.09, 413.77, 413.76 }
		k_out := []float64{ 33.707545095592835, 0.0, 19.531577420813772, 100.0, 99.83530831668756, 99.48099388716847, 43.64325802732234, 100.0, 99.65724957974652 }
		d_out := []float64{ 11.663644020364655, 11.235848365197612, 17.746374172135535, 39.843859140271256, 73.12229524583377, 99.77210073461868, 80.98652007705945, 81.04141730483026, 81.10016920235628 }
		k, d  := StochRSI(in, 14, 5, 3)
		Expect(roundedValues(k[2:], .5, 4)).To(Equal(roundedValues(k_out, .5, 4)))
		Expect(roundedValues(d, .5, 4)).To(Equal(roundedValues(d_out, .5, 4)))
	})
})
